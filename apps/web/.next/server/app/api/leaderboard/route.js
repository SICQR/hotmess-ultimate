(()=>{var e={};e.id=7414,e.ids=[7414],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},79571:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>c,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>n});var a=t(52412),o=t(14293),i=t(94147);let u=(0,t(73242).eI)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);async function n(){try{let{data:e,error:r}=await u.rpc("get_affiliate_leaderboard");if(r)return console.error("Database error:",r),Response.json({error:"Database error"},{status:500});let t=e?.map((e,r)=>{var t;return{rank:r+1,ref_code:e.ref_code,total_sales:parseFloat(e.total_sales||0),total_referrals:parseInt(e.total_referrals||0),conversion_rate:Math.round(e.sales_count/Math.max(e.total_referrals,1)*100),last_sale:e.last_sale,tier:(t=parseFloat(e.total_sales||0))>=5e3?"VIP":t>=1e3?"Gold":t>=500?"Silver":t>=100?"Bronze":"Starter"}})||[];return Response.json({leaderboard:t,updated_at:new Date().toISOString(),total_affiliates:t.length})}catch(e){return console.error("Leaderboard API error:",e),Response.json({error:"Internal server error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/leaderboard/route",pathname:"/api/leaderboard",filename:"route",bundlePath:"app/api/leaderboard/route"},resolvedPagePath:"/home/runner/work/hotmess-ultimate/hotmess-ultimate/apps/web/app/api/leaderboard/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:c}=p;function x(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},35303:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4147,9971],()=>t(79571));module.exports=s})();