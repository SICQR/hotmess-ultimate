(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5472],{4141:(t,e,a)=>{Promise.resolve().then(a.bind(a,3007))},3007:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var n=a(7437),o=a(2265);function c(){let[t,e]=(0,o.useState)("asking");return(0,o.useEffect)(()=>{(async()=>{let t=new URL(window.location.href),a={h:t.searchParams.get("h"),a:t.searchParams.get("a"),c:t.searchParams.get("c"),v:t.searchParams.get("v"),ref:document.referrer||null,ua:navigator.userAgent,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,utm:Object.fromEntries([...t.searchParams.entries()].filter(t=>{let[e]=t;return e.startsWith("utm_")})),loc:null,loc_accuracy:null,loc_consent:null},n=async()=>{try{await fetch("/api/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e("ok")}catch(t){e("error")}finally{let t=function(t){var e,a;let n=new URLSearchParams;return(t.affiliate&&n.set("a",t.affiliate),t.campaign&&n.set("c",t.campaign),Object.entries(t.utm||{}).forEach(t=>{let[e,a]=t;return n.set(e,a)}),null===(e=t.sku)||void 0===e?void 0:e.startsWith("HNH"))?"/shop/hnh?".concat(n.toString()):(null===(a=t.sku)||void 0===a?void 0:a.startsWith("SUPERHUNG"))?"/shop/superhung?".concat(n.toString()):t.sku?"/shop/".concat(encodeURIComponent(t.sku.toLowerCase()),"?").concat(n.toString()):"/radio?".concat(n.toString())}({sku:a.h||void 0,affiliate:a.a||void 0,campaign:a.c||void 0,utm:a.utm||{}});window.location.replace(t)}};"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t=>{a.loc={lat:t.coords.latitude,lng:t.coords.longitude},a.loc_accuracy=t.coords.accuracy,a.loc_consent=!0,n()},()=>{a.loc_consent=!1,n()},{enableHighAccuracy:!0,timeout:8e3,maximumAge:0}):(a.loc_consent=!1,n())})()},[]),(0,n.jsxs)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:["asking"===t&&(0,n.jsx)("p",{className:"text-sm text-white/80",children:"Requesting location…"}),"ok"===t&&(0,n.jsx)("p",{className:"text-sm text-white/80",children:"Logged. Moving you on…"}),"skip"===t&&(0,n.jsx)("p",{className:"text-sm text-white/80",children:"Skipping location…"}),"error"===t&&(0,n.jsx)("p",{className:"text-sm text-red-400",children:"Couldn’t log scan. Carrying on."})]})}}},t=>{var e=e=>t(t.s=e);t.O(0,[7130,6215,1744],()=>e(4141)),_N_E=t.O()}]);